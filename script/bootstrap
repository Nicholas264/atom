#!/usr/bin/env node
var safeExec = require('./utils/child-process-wrapper.js').safeExec;
var path = require('path');

var commands = [
  'git submodule --quiet sync',
  'git submodule --quiet update --recursive --init',
  'cd vendor/apm; npm install --silent .',
  'npm install --silent vendor/apm',
  'echo',
  'node node_modules/.bin/apm install --silent',
];

process.chdir(path.dirname(__dirname));

var i = 0;
var startCommands = function() {
  if (i < commands.length)
    safeExec(commands[i++], startCommands);
  else
    process.exit(0);
}
startCommands();
